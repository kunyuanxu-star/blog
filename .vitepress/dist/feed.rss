<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Kunyuan Xu's Blog</title>
        <link>https://kunyuanxu-star.github.io/blog</link>
        <description>System Software Developer. Enthusiast of Rust &amp; OS Kernels.</description>
        <lastBuildDate>Sat, 10 Jan 2026 06:36:16 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-CN</language>
        <copyright>Copyright (c) 2024-present, Kunyuan Xu</copyright>
        <item>
            <title><![CDATA[æ·±å…¥ç†è§£ Rust æ‰€æœ‰æƒæœºåˆ¶]]></title>
            <link>https://kunyuanxu-star.github.io/blog/posts/rust-ownership.html</link>
            <guid isPermaLink="false">https://kunyuanxu-star.github.io/blog/posts/rust-ownership.html</guid>
            <pubDate>Sun, 12 May 2024 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="æ·±å…¥ç†è§£-rust-æ‰€æœ‰æƒæœºåˆ¶" tabindex="-1">æ·±å…¥ç†è§£ Rust æ‰€æœ‰æƒæœºåˆ¶ <a class="header-anchor" href="#æ·±å…¥ç†è§£-rust-æ‰€æœ‰æƒæœºåˆ¶" aria-label="Permalink to &quot;æ·±å…¥ç†è§£ Rust æ‰€æœ‰æƒæœºåˆ¶&quot;">&ZeroWidthSpace;</a></h1>
<p>Rust çš„æ‰€æœ‰æƒç³»ç»Ÿæ˜¯å…¶æœ€ç‹¬ç‰¹çš„åŠŸèƒ½ã€‚å®ƒè®© Rust æ— éœ€åƒåœ¾å›æ”¶å³å¯ä¿éšœå†…å­˜å®‰å…¨ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ" tabindex="-1">ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒï¼Ÿ&quot;">&ZeroWidthSpace;</a></h2>
<p>æ‰€æœ‰æƒæ˜¯ Rust æœ€ä¸ºä¸ä¼—ä¸åŒçš„ç‰¹æ€§ï¼Œå®ƒè®© Rust æ— éœ€åƒåœ¾å›æ”¶ï¼ˆgarbage collectorï¼‰å³å¯ä¿éšœå†…å­˜å®‰å…¨ã€‚</p>
<h3 id="æ‰€æœ‰æƒè§„åˆ™" tabindex="-1">æ‰€æœ‰æƒè§„åˆ™ <a class="header-anchor" href="#æ‰€æœ‰æƒè§„åˆ™" aria-label="Permalink to &quot;æ‰€æœ‰æƒè§„åˆ™&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>Rust ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªè¢«ç§°ä¸ºå…¶ <strong>æ‰€æœ‰è€…</strong>ï¼ˆownerï¼‰çš„å˜é‡ã€‚</li>
<li>å€¼åœ¨ä»»ä¸€æ—¶åˆ»æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚</li>
<li>å½“æ‰€æœ‰è€…ï¼ˆå˜é‡ï¼‰ç¦»å¼€ä½œç”¨åŸŸï¼Œè¿™ä¸ªå€¼å°†è¢«ä¸¢å¼ƒã€‚</li>
</ol>
<h2 id="ç¤ºä¾‹ä»£ç " tabindex="-1">ç¤ºä¾‹ä»£ç  <a class="header-anchor" href="#ç¤ºä¾‹ä»£ç " aria-label="Permalink to &quot;ç¤ºä¾‹ä»£ç &quot;">&ZeroWidthSpace;</a></h2>
<div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s1; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// s1 çš„å€¼è¢«ç§»åŠ¨åˆ° s2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // println!("{}", s1);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // è¿™ä¼šæŠ¥é”™ï¼</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    println!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"{}"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, s2); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è¿™æ˜¯æ­£ç¡®çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="å€Ÿç”¨ä¸å¼•ç”¨" tabindex="-1">å€Ÿç”¨ä¸å¼•ç”¨ <a class="header-anchor" href="#å€Ÿç”¨ä¸å¼•ç”¨" aria-label="Permalink to &quot;å€Ÿç”¨ä¸å¼•ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<p>Rust ä½¿ç”¨å€Ÿç”¨ï¼ˆborrowingï¼‰æœºåˆ¶æ¥åœ¨ä¸è·å–æ‰€æœ‰æƒçš„æƒ…å†µä¸‹è®¿é—®æ•°æ®ã€‚</p>
<div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> len </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> calculate_length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s1);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    println!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"The length of '{}' is {}."</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, s1, len);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> calculate_length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> usize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="å¯å˜å¼•ç”¨" tabindex="-1">å¯å˜å¼•ç”¨ <a class="header-anchor" href="#å¯å˜å¼•ç”¨" aria-label="Permalink to &quot;å¯å˜å¼•ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<p>å¯å˜å¼•ç”¨å…è®¸ä½ ä¿®æ”¹å€Ÿç”¨çš„å€¼ï¼š</p>
<div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> mut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;mut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    println!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"{}"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, s); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// "hello, world"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(some_string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;mut</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    some_string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push_str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">", world"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="å¯å˜å¼•ç”¨çš„é™åˆ¶" tabindex="-1">å¯å˜å¼•ç”¨çš„é™åˆ¶ <a class="header-anchor" href="#å¯å˜å¼•ç”¨çš„é™åˆ¶" aria-label="Permalink to &quot;å¯å˜å¼•ç”¨çš„é™åˆ¶&quot;">&ZeroWidthSpace;</a></h3>
<p><strong>é‡è¦è§„åˆ™</strong>ï¼šåœ¨ç‰¹å®šä½œç”¨åŸŸä¸­çš„ç‰¹å®šæ•°æ®åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ã€‚</p>
<div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> mut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;mut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> r2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;mut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// âŒ é”™è¯¯ï¼ä¸èƒ½åŒæ—¶æœ‰ä¸¤ä¸ªå¯å˜å¼•ç”¨</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">println!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"{}, {}"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, r1, r2);</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="slice-ç±»å‹" tabindex="-1">Slice ç±»å‹ <a class="header-anchor" href="#slice-ç±»å‹" aria-label="Permalink to &quot;Slice ç±»å‹&quot;">&ZeroWidthSpace;</a></h2>
<p>Slice å…è®¸ä½ å¼•ç”¨é›†åˆä¸­ä¸€æ®µè¿ç»­çš„å…ƒç´ åºåˆ—ï¼Œè€Œä¸ç”¨å¼•ç”¨æ•´ä¸ªé›†åˆã€‚</p>
<div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> first_word</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">as_bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (i, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">item) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> bytes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">iter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">enumerate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> b' '</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">i];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    &#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> mut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello world"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> word </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> first_word</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // s.clear();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // âŒ é”™è¯¯ï¼s å·²è¢«ä¸å¯å˜å€Ÿç”¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    println!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"the first word is: {}"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, word);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>æ‰€æœ‰æƒç³»ç»Ÿæ˜¯ Rust çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç†è§£å®ƒå¯¹äºç¼–å†™é«˜æ•ˆã€å®‰å…¨çš„ Rust ä»£ç è‡³å…³é‡è¦ã€‚ä¸»è¦è¦ç‚¹ï¼š</p>
<ul>
<li>âœ… æ¯ä¸ªå€¼éƒ½æœ‰å”¯ä¸€çš„æ‰€æœ‰è€…</li>
<li>âœ… é€šè¿‡å€Ÿç”¨å¯ä»¥ä¸´æ—¶è®¿é—®æ•°æ®</li>
<li>âœ… ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥æ‰€æœ‰æƒè§„åˆ™</li>
<li>âœ… é›¶è¿è¡Œæ—¶å¼€é”€çš„å†…å­˜å®‰å…¨</li>
</ul>
<p>æŒæ¡æ‰€æœ‰æƒåï¼Œä½ ä¼šå‘ç° Rust çš„ç¼–è¯‘å™¨æ˜¯ä½ æœ€å¥½çš„æœ‹å‹ï¼ğŸ¦€</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ªç®€å•çš„ OS Kernel]]></title>
            <link>https://kunyuanxu-star.github.io/blog/posts/os-kernel-from-scratch.html</link>
            <guid isPermaLink="false">https://kunyuanxu-star.github.io/blog/posts/os-kernel-from-scratch.html</guid>
            <pubDate>Sun, 28 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[<h1 id="ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ªç®€å•çš„-os-kernel" tabindex="-1">ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ªç®€å•çš„ OS Kernel <a class="header-anchor" href="#ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ªç®€å•çš„-os-kernel" aria-label="Permalink to &quot;ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ªç®€å•çš„ OS Kernel&quot;">&ZeroWidthSpace;</a></h1>
<p>è®©æˆ‘ä»¬åŠ¨æ‰‹å†™ä¸€ä¸ª Hello World çº§åˆ«çš„å†…æ ¸ï¼Œæ¢ç´¢è®¡ç®—æœºå¯åŠ¨çš„å¥¥ç§˜ã€‚</p>
<h2 id="å¼•å¯¼è¿‡ç¨‹" tabindex="-1">å¼•å¯¼è¿‡ç¨‹ <a class="header-anchor" href="#å¼•å¯¼è¿‡ç¨‹" aria-label="Permalink to &quot;å¼•å¯¼è¿‡ç¨‹&quot;">&ZeroWidthSpace;</a></h2>
<p>è®¡ç®—æœºå¯åŠ¨æ—¶ï¼ŒBIOS ä¼šåŠ è½½å¼•å¯¼æ‰‡åŒºï¼ˆBoot Sectorï¼‰åˆ°å†…å­˜åœ°å€ <code>0x7c00</code>ã€‚</p>
<h3 id="ç¼–å†™å¼•å¯¼ä»£ç " tabindex="-1">ç¼–å†™å¼•å¯¼ä»£ç  <a class="header-anchor" href="#ç¼–å†™å¼•å¯¼ä»£ç " aria-label="Permalink to &quot;ç¼–å†™å¼•å¯¼ä»£ç &quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[org </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x7c00</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[bits </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">start:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> si</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, hello</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> print_string</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    jmp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">print_string:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    lodsb</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> al</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">al</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    jz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> .done</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ah</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x0e</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    int</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    jmp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> print_string</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">done:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ret</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">hello:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 'Hello, OS World!', </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">times</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 510</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">-($-$$) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0xaa55</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="å…³é”®æ¦‚å¿µ" tabindex="-1">å…³é”®æ¦‚å¿µ <a class="header-anchor" href="#å…³é”®æ¦‚å¿µ" aria-label="Permalink to &quot;å…³é”®æ¦‚å¿µ&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li><code>[org 0x7c00]</code>: å‘Šè¯‰æ±‡ç¼–å™¨ä»£ç å°†è¢«åŠ è½½åˆ°å†…å­˜åœ°å€ 0x7c00</li>
<li><code>[bits 16]</code>: æŒ‡å®šç”Ÿæˆ 16 ä½å®æ¨¡å¼ä»£ç </li>
<li><code>0xaa55</code>: å¼•å¯¼æ‰‡åŒºç­¾åï¼ŒBIOS é€šè¿‡å®ƒè¯†åˆ«å¼•å¯¼è®¾å¤‡</li>
</ul>
<h2 id="ä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼" tabindex="-1">ä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼ <a class="header-anchor" href="#ä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼" aria-label="Permalink to &quot;ä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼&quot;">&ZeroWidthSpace;</a></h2>
<p>å®æ¨¡å¼ä¸‹åªèƒ½è®¿é—® 1MB å†…å­˜ï¼Œæˆ‘ä»¬éœ€è¦åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ã€‚</p>
<h3 id="å…¨å±€æè¿°ç¬¦è¡¨-gdt" tabindex="-1">å…¨å±€æè¿°ç¬¦è¡¨ï¼ˆGDTï¼‰ <a class="header-anchor" href="#å…¨å±€æè¿°ç¬¦è¡¨-gdt" aria-label="Permalink to &quot;å…¨å±€æè¿°ç¬¦è¡¨ï¼ˆGDTï¼‰&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_start:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dq</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                  ; null descriptor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_code:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0xffff</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">               ; limit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                  ; base (low)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                  ; base (middle)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10011010b</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            ; access</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 11001111b</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            ; granularity</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                  ; base (high)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_data:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0xffff</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10010010b</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 11001111b</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_end:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_descriptor:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> gdt_end - gdt_start - </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> gdt_start</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼" tabindex="-1">åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ <a class="header-anchor" href="#åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼" aria-label="Permalink to &quot;åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">cli</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                         ; å…³é—­ä¸­æ–­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">lgdt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [gdt_descriptor]       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">; åŠ è½½ GDT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> eax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cr0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> eax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                 ; è®¾ç½®ä¿æŠ¤æ¨¡å¼ä½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cr0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">eax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">jmp</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> CODE_SEG:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">init_pm        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">; è¿œè·³è½¬åˆ° 32 ä½ä»£ç </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[bits </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">init_pm:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, DATA_SEG</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ss</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> es</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> fs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> gs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ebp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x90000</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> esp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ebp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> kernel_main</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="ç¼–å†™ç®€å•çš„å†…æ ¸" tabindex="-1">ç¼–å†™ç®€å•çš„å†…æ ¸ <a class="header-anchor" href="#ç¼–å†™ç®€å•çš„å†…æ ¸" aria-label="Permalink to &quot;ç¼–å†™ç®€å•çš„å†…æ ¸&quot;">&ZeroWidthSpace;</a></h2>
<div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// kernel.c</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> kernel_main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    char</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">video_memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">char</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">0x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">b8000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> char</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "Hello from Kernel!"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        video_memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[i];</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        video_memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> 0x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // ç™½å­—é»‘åº•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æŒ‚èµ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="æ„å»ºä¸è¿è¡Œ" tabindex="-1">æ„å»ºä¸è¿è¡Œ <a class="header-anchor" href="#æ„å»ºä¸è¿è¡Œ" aria-label="Permalink to &quot;æ„å»ºä¸è¿è¡Œ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="makefile" tabindex="-1">Makefile <a class="header-anchor" href="#makefile" aria-label="Permalink to &quot;Makefile&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-makefile vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">makefile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">boot.bin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: boot.asm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	nasm -f bin boot.asm -o boot.bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kernel.o</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: kernel.c</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	gcc -m32 -c kernel.c -o kernel.o -ffreestanding</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kernel.bin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: kernel.o</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	ld -m elf_i386 -Ttext 0x1000 kernel.o -o kernel.bin --oformat binary</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">os.bin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: boot.bin kernel.bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	cat boot.bin kernel.bin > os.bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: os.bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	qemu-system-x86_64 -drive format=raw,file=os.bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">clean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	rm -f *.bin *.o</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="è¿è¡Œ" tabindex="-1">è¿è¡Œ <a class="header-anchor" href="#è¿è¡Œ" aria-label="Permalink to &quot;è¿è¡Œ&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">make</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="ä¸‹ä¸€æ­¥" tabindex="-1">ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ä¸‹ä¸€æ­¥&quot;">&ZeroWidthSpace;</a></h2>
<p>ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªæœ€ç®€å•çš„æ“ä½œç³»ç»Ÿå†…æ ¸ï¼æ¥ä¸‹æ¥å¯ä»¥ï¼š</p>
<ul>
<li>ğŸ”§ å®ç°ä¸­æ–­å¤„ç†ï¼ˆIDTï¼‰</li>
<li>ğŸ’¾ æ·»åŠ å†…å­˜ç®¡ç†</li>
<li>âŒ¨ï¸ å®ç°é”®ç›˜é©±åŠ¨</li>
<li>ğŸ“Ÿ å®ç°ç®€å•çš„ Shell</li>
</ul>
<h2 id="å‚è€ƒèµ„æº" tabindex="-1">å‚è€ƒèµ„æº <a class="header-anchor" href="#å‚è€ƒèµ„æº" aria-label="Permalink to &quot;å‚è€ƒèµ„æº&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="https://wiki.osdev.org/" target="_blank" rel="noreferrer">OSDev Wiki</a></li>
<li><a href="https://www.cs.bham.ac.uk/~exr/lectures/opsys/10_11/lectures/os-dev.pdf" target="_blank" rel="noreferrer">Writing a Simple Operating System from Scratch</a></li>
<li><a href="https://littleosbook.github.io/" target="_blank" rel="noreferrer">The little book about OS development</a></li>
</ul>
]]></description>
            <content:encoded><![CDATA[<h1 id="ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ªç®€å•çš„-os-kernel" tabindex="-1">ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ªç®€å•çš„ OS Kernel <a class="header-anchor" href="#ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ªç®€å•çš„-os-kernel" aria-label="Permalink to &quot;ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ªç®€å•çš„ OS Kernel&quot;">&ZeroWidthSpace;</a></h1>
<p>è®©æˆ‘ä»¬åŠ¨æ‰‹å†™ä¸€ä¸ª Hello World çº§åˆ«çš„å†…æ ¸ï¼Œæ¢ç´¢è®¡ç®—æœºå¯åŠ¨çš„å¥¥ç§˜ã€‚</p>
<h2 id="å¼•å¯¼è¿‡ç¨‹" tabindex="-1">å¼•å¯¼è¿‡ç¨‹ <a class="header-anchor" href="#å¼•å¯¼è¿‡ç¨‹" aria-label="Permalink to &quot;å¼•å¯¼è¿‡ç¨‹&quot;">&ZeroWidthSpace;</a></h2>
<p>è®¡ç®—æœºå¯åŠ¨æ—¶ï¼ŒBIOS ä¼šåŠ è½½å¼•å¯¼æ‰‡åŒºï¼ˆBoot Sectorï¼‰åˆ°å†…å­˜åœ°å€ <code>0x7c00</code>ã€‚</p>
<h3 id="ç¼–å†™å¼•å¯¼ä»£ç " tabindex="-1">ç¼–å†™å¼•å¯¼ä»£ç  <a class="header-anchor" href="#ç¼–å†™å¼•å¯¼ä»£ç " aria-label="Permalink to &quot;ç¼–å†™å¼•å¯¼ä»£ç &quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[org </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x7c00</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[bits </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">start:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> si</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, hello</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> print_string</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    jmp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">print_string:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    lodsb</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> al</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">al</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    jz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> .done</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ah</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x0e</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    int</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    jmp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> print_string</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">done:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ret</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">hello:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 'Hello, OS World!', </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">times</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 510</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">-($-$$) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0xaa55</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="å…³é”®æ¦‚å¿µ" tabindex="-1">å…³é”®æ¦‚å¿µ <a class="header-anchor" href="#å…³é”®æ¦‚å¿µ" aria-label="Permalink to &quot;å…³é”®æ¦‚å¿µ&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li><code>[org 0x7c00]</code>: å‘Šè¯‰æ±‡ç¼–å™¨ä»£ç å°†è¢«åŠ è½½åˆ°å†…å­˜åœ°å€ 0x7c00</li>
<li><code>[bits 16]</code>: æŒ‡å®šç”Ÿæˆ 16 ä½å®æ¨¡å¼ä»£ç </li>
<li><code>0xaa55</code>: å¼•å¯¼æ‰‡åŒºç­¾åï¼ŒBIOS é€šè¿‡å®ƒè¯†åˆ«å¼•å¯¼è®¾å¤‡</li>
</ul>
<h2 id="ä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼" tabindex="-1">ä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼ <a class="header-anchor" href="#ä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼" aria-label="Permalink to &quot;ä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼&quot;">&ZeroWidthSpace;</a></h2>
<p>å®æ¨¡å¼ä¸‹åªèƒ½è®¿é—® 1MB å†…å­˜ï¼Œæˆ‘ä»¬éœ€è¦åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ã€‚</p>
<h3 id="å…¨å±€æè¿°ç¬¦è¡¨-gdt" tabindex="-1">å…¨å±€æè¿°ç¬¦è¡¨ï¼ˆGDTï¼‰ <a class="header-anchor" href="#å…¨å±€æè¿°ç¬¦è¡¨-gdt" aria-label="Permalink to &quot;å…¨å±€æè¿°ç¬¦è¡¨ï¼ˆGDTï¼‰&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_start:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dq</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                  ; null descriptor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_code:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0xffff</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">               ; limit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                  ; base (low)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                  ; base (middle)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10011010b</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            ; access</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 11001111b</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            ; granularity</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                  ; base (high)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_data:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0xffff</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 10010010b</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 11001111b</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0x0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_end:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gdt_descriptor:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> gdt_end - gdt_start - </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    dd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> gdt_start</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼" tabindex="-1">åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ <a class="header-anchor" href="#åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼" aria-label="Permalink to &quot;åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">cli</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                         ; å…³é—­ä¸­æ–­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">lgdt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [gdt_descriptor]       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">; åŠ è½½ GDT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> eax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cr0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> eax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                 ; è®¾ç½®ä¿æŠ¤æ¨¡å¼ä½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cr0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">eax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">jmp</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> CODE_SEG:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">init_pm        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">; è¿œè·³è½¬åˆ° 32 ä½ä»£ç </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[bits </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">init_pm:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, DATA_SEG</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ss</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> es</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> fs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> gs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ax</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ebp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x90000</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> esp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ebp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> kernel_main</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="ç¼–å†™ç®€å•çš„å†…æ ¸" tabindex="-1">ç¼–å†™ç®€å•çš„å†…æ ¸ <a class="header-anchor" href="#ç¼–å†™ç®€å•çš„å†…æ ¸" aria-label="Permalink to &quot;ç¼–å†™ç®€å•çš„å†…æ ¸&quot;">&ZeroWidthSpace;</a></h2>
<div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// kernel.c</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> kernel_main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    char</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">video_memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">char</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">0x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">b8000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> char</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "Hello from Kernel!"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        video_memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[i];</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        video_memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> 0x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // ç™½å­—é»‘åº•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æŒ‚èµ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="æ„å»ºä¸è¿è¡Œ" tabindex="-1">æ„å»ºä¸è¿è¡Œ <a class="header-anchor" href="#æ„å»ºä¸è¿è¡Œ" aria-label="Permalink to &quot;æ„å»ºä¸è¿è¡Œ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="makefile" tabindex="-1">Makefile <a class="header-anchor" href="#makefile" aria-label="Permalink to &quot;Makefile&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-makefile vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">makefile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">boot.bin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: boot.asm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	nasm -f bin boot.asm -o boot.bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kernel.o</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: kernel.c</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	gcc -m32 -c kernel.c -o kernel.o -ffreestanding</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kernel.bin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: kernel.o</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	ld -m elf_i386 -Ttext 0x1000 kernel.o -o kernel.bin --oformat binary</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">os.bin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: boot.bin kernel.bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	cat boot.bin kernel.bin > os.bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: os.bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	qemu-system-x86_64 -drive format=raw,file=os.bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">clean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	rm -f *.bin *.o</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="è¿è¡Œ" tabindex="-1">è¿è¡Œ <a class="header-anchor" href="#è¿è¡Œ" aria-label="Permalink to &quot;è¿è¡Œ&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">make</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="ä¸‹ä¸€æ­¥" tabindex="-1">ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ä¸‹ä¸€æ­¥&quot;">&ZeroWidthSpace;</a></h2>
<p>ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªæœ€ç®€å•çš„æ“ä½œç³»ç»Ÿå†…æ ¸ï¼æ¥ä¸‹æ¥å¯ä»¥ï¼š</p>
<ul>
<li>ğŸ”§ å®ç°ä¸­æ–­å¤„ç†ï¼ˆIDTï¼‰</li>
<li>ğŸ’¾ æ·»åŠ å†…å­˜ç®¡ç†</li>
<li>âŒ¨ï¸ å®ç°é”®ç›˜é©±åŠ¨</li>
<li>ğŸ“Ÿ å®ç°ç®€å•çš„ Shell</li>
</ul>
<h2 id="å‚è€ƒèµ„æº" tabindex="-1">å‚è€ƒèµ„æº <a class="header-anchor" href="#å‚è€ƒèµ„æº" aria-label="Permalink to &quot;å‚è€ƒèµ„æº&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="https://wiki.osdev.org/" target="_blank" rel="noreferrer">OSDev Wiki</a></li>
<li><a href="https://www.cs.bham.ac.uk/~exr/lectures/opsys/10_11/lectures/os-dev.pdf" target="_blank" rel="noreferrer">Writing a Simple Operating System from Scratch</a></li>
<li><a href="https://littleosbook.github.io/" target="_blank" rel="noreferrer">The little book about OS development</a></li>
</ul>
<hr>
<p>è¿™å°±æ˜¯æ“ä½œç³»ç»Ÿå¼€å‘çš„ç¬¬ä¸€æ­¥ï¼ğŸš€</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GitHub Actions è‡ªåŠ¨åŒ–éƒ¨ç½²å®è·µ]]></title>
            <link>https://kunyuanxu-star.github.io/blog/posts/github-actions-deployment.html</link>
            <guid isPermaLink="false">https://kunyuanxu-star.github.io/blog/posts/github-actions-deployment.html</guid>
            <pubDate>Mon, 15 Apr 2024 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<h1 id="github-actions-è‡ªåŠ¨åŒ–éƒ¨ç½²å®è·µ" tabindex="-1">GitHub Actions è‡ªåŠ¨åŒ–éƒ¨ç½²å®è·µ <a class="header-anchor" href="#github-actions-è‡ªåŠ¨åŒ–éƒ¨ç½²å®è·µ" aria-label="Permalink to &quot;GitHub Actions è‡ªåŠ¨åŒ–éƒ¨ç½²å®è·µ&quot;">&ZeroWidthSpace;</a></h1>
<p>CI/CD æ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•é…ç½® GitHub Actionsï¼Œå®ç°ä»£ç æäº¤åè‡ªåŠ¨è¿è¡Œæµ‹è¯•å¹¶éƒ¨ç½²åˆ° GitHub Pagesã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-github-actions" tabindex="-1">ä»€ä¹ˆæ˜¯ GitHub Actionsï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-github-actions" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ GitHub Actionsï¼Ÿ&quot;">&ZeroWidthSpace;</a></h2>
<p>GitHub Actions æ˜¯ GitHub æä¾›çš„æŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²(CI/CD)å¹³å°ï¼Œå…è®¸ä½ è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ã€‚</p>
<h2 id="é…ç½®å·¥ä½œæµ" tabindex="-1">é…ç½®å·¥ä½œæµ <a class="header-anchor" href="#é…ç½®å·¥ä½œæµ" aria-label="Permalink to &quot;é…ç½®å·¥ä½œæµ&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.github/workflows/deploy.yml</code>ï¼š</p>
<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Deploy to GitHub Pages</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  workflow_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  contents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">read</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  pages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">write</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  id-token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">write</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Checkout</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">actions/checkout@v4</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Setup Node</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">actions/setup-node@v4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">20</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'npm'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">npm ci</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Build</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Upload artifact</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">actions/upload-pages-artifact@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.vitepress/dist</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">github-pages</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">${{ steps.deployment.outputs.page_url }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    needs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">build</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Deploy to GitHub Pages</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">actions/deploy-pages@v4</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="å…³é”®é…ç½®è¯´æ˜" tabindex="-1">å…³é”®é…ç½®è¯´æ˜ <a class="header-anchor" href="#å…³é”®é…ç½®è¯´æ˜" aria-label="Permalink to &quot;å…³é”®é…ç½®è¯´æ˜&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="è§¦å‘å™¨" tabindex="-1">è§¦å‘å™¨ <a class="header-anchor" href="#è§¦å‘å™¨" aria-label="Permalink to &quot;è§¦å‘å™¨&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  workflow_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul>
<li><code>push</code>: å½“ä»£ç æ¨é€åˆ° main åˆ†æ”¯æ—¶è§¦å‘</li>
<li><code>workflow_dispatch</code>: å…è®¸æ‰‹åŠ¨è§¦å‘å·¥ä½œæµ</li>
</ul>
<h3 id="æƒé™è®¾ç½®" tabindex="-1">æƒé™è®¾ç½® <a class="header-anchor" href="#æƒé™è®¾ç½®" aria-label="Permalink to &quot;æƒé™è®¾ç½®&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  contents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">read</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  pages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">write</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  id-token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">write</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿™äº›æƒé™ç¡®ä¿å·¥ä½œæµå¯ä»¥è¯»å–ä»£ç ã€å†™å…¥ Pages å’Œç”Ÿæˆèº«ä»½ä»¤ç‰Œã€‚</p>
<h3 id="ç¼“å­˜ä¾èµ–" tabindex="-1">ç¼“å­˜ä¾èµ– <a class="header-anchor" href="#ç¼“å­˜ä¾èµ–" aria-label="Permalink to &quot;ç¼“å­˜ä¾èµ–&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Setup Node</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">actions/setup-node@v4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">20</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'npm'</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä½¿ç”¨ npm ç¼“å­˜å¯ä»¥æ˜¾è‘—åŠ å¿«æ„å»ºé€Ÿåº¦ã€‚</p>
<h2 id="ä»“åº“è®¾ç½®" tabindex="-1">ä»“åº“è®¾ç½® <a class="header-anchor" href="#ä»“åº“è®¾ç½®" aria-label="Permalink to &quot;ä»“åº“è®¾ç½®&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨ GitHub ä»“åº“ä¸­é…ç½®ï¼š</p>
<ol>
<li>è¿›å…¥ <strong>Settings</strong> â†’ <strong>Pages</strong></li>
<li>Source é€‰æ‹© <strong>GitHub Actions</strong></li>
<li>ä¿å­˜è®¾ç½®</li>
</ol>
<h2 id="éªŒè¯éƒ¨ç½²" tabindex="-1">éªŒè¯éƒ¨ç½² <a class="header-anchor" href="#éªŒè¯éƒ¨ç½²" aria-label="Permalink to &quot;éªŒè¯éƒ¨ç½²&quot;">&ZeroWidthSpace;</a></h2>
<p>æäº¤ä»£ç åï¼š</p>
<ol>
<li>è¿›å…¥ <strong>Actions</strong> æ ‡ç­¾é¡µ</li>
<li>æŸ¥çœ‹å·¥ä½œæµè¿è¡ŒçŠ¶æ€</li>
<li>ç­‰å¾…éƒ¨ç½²å®Œæˆ</li>
<li>è®¿é—® <code>https://&lt;username&gt;.github.io/&lt;repo&gt;/</code></li>
</ol>
<h2 id="å¸¸è§é—®é¢˜" tabindex="-1">å¸¸è§é—®é¢˜ <a class="header-anchor" href="#å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;å¸¸è§é—®é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æ„å»ºå¤±è´¥" tabindex="-1">æ„å»ºå¤±è´¥ <a class="header-anchor" href="#æ„å»ºå¤±è´¥" aria-label="Permalink to &quot;æ„å»ºå¤±è´¥&quot;">&ZeroWidthSpace;</a></h3>
<p>æ£€æŸ¥æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯ï¼š</p>
<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æœ¬åœ°æµ‹è¯•æ„å»º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> build</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="æƒé™é”™è¯¯" tabindex="-1">æƒé™é”™è¯¯ <a class="header-anchor" href="#æƒé™é”™è¯¯" aria-label="Permalink to &quot;æƒé™é”™è¯¯&quot;">&ZeroWidthSpace;</a></h3>
<p>ç¡®ä¿ä»“åº“ Settings â†’ Actions â†’ General ä¸­å¯ç”¨äº†ï¼š</p>
<ul>
<li>âœ… Read and write permissions</li>
<li>âœ… Allow GitHub Actions to create and approve pull requests</li>
</ul>
<h3 id="_404-é”™è¯¯" tabindex="-1">404 é”™è¯¯ <a class="header-anchor" href="#_404-é”™è¯¯" aria-label="Permalink to &quot;404 é”™è¯¯&quot;">&ZeroWidthSpace;</a></h3>
<p>æ£€æŸ¥ VitePress é…ç½®ä¸­çš„ <code>base</code> è·¯å¾„ï¼š</p>
<div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  base: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/your-repo-name/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="æœ€ä½³å®è·µ" tabindex="-1">æœ€ä½³å®è·µ <a class="header-anchor" href="#æœ€ä½³å®è·µ" aria-label="Permalink to &quot;æœ€ä½³å®è·µ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_1-æœ¬åœ°é¢„è§ˆ" tabindex="-1">1. æœ¬åœ°é¢„è§ˆ <a class="header-anchor" href="#_1-æœ¬åœ°é¢„è§ˆ" aria-label="Permalink to &quot;1. æœ¬åœ°é¢„è§ˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨æ¨é€å‰æœ¬åœ°æ„å»ºéªŒè¯ï¼š</p>
<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> preview</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-ç¯å¢ƒå˜é‡" tabindex="-1">2. ç¯å¢ƒå˜é‡ <a class="header-anchor" href="#_2-ç¯å¢ƒå˜é‡" aria-label="Permalink to &quot;2. ç¯å¢ƒå˜é‡&quot;">&ZeroWidthSpace;</a></h3>
<p>ä½¿ç”¨ GitHub Secrets å­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼š</p>
<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  API_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">${{ secrets.API_KEY }}</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-æ¡ä»¶éƒ¨ç½²" tabindex="-1">3. æ¡ä»¶éƒ¨ç½² <a class="header-anchor" href="#_3-æ¡ä»¶éƒ¨ç½²" aria-label="Permalink to &quot;3. æ¡ä»¶éƒ¨ç½²&quot;">&ZeroWidthSpace;</a></h3>
<p>ä»…åœ¨æµ‹è¯•é€šè¿‡åéƒ¨ç½²ï¼š</p>
<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">npm test</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    needs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # ä¾èµ–æµ‹è¯•ä½œä¸š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # ...</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="è¿›é˜¶é…ç½®" tabindex="-1">è¿›é˜¶é…ç½® <a class="header-anchor" href="#è¿›é˜¶é…ç½®" aria-label="Permalink to &quot;è¿›é˜¶é…ç½®&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="çŸ©é˜µæ„å»º" tabindex="-1">çŸ©é˜µæ„å»º <a class="header-anchor" href="#çŸ©é˜µæ„å»º" aria-label="Permalink to &quot;çŸ©é˜µæ„å»º&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨å¤šä¸ªç¯å¢ƒä¸­æµ‹è¯•ï¼š</p>
<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">actions/setup-node@v4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">${{ matrix.node-version }}</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="å®šæ—¶ä»»åŠ¡" tabindex="-1">å®šæ—¶ä»»åŠ¡ <a class="header-anchor" href="#å®šæ—¶ä»»åŠ¡" aria-label="Permalink to &quot;å®šæ—¶ä»»åŠ¡&quot;">&ZeroWidthSpace;</a></h3>
<p>å®šæœŸè¿è¡Œæ„å»ºï¼š</p>
<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  schedule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">cron</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0 0 * * 0'</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # æ¯å‘¨æ—¥åˆå¤œ</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>GitHub Actions è®©éƒ¨ç½²å˜å¾—ç®€å•è€Œè‡ªåŠ¨åŒ–ï¼š</p>
<ul>
<li>âœ… æ¨é€ä»£ç å³å¯è‡ªåŠ¨éƒ¨ç½²</li>
<li>âœ… å…è´¹çš„ CI/CD æœåŠ¡</li>
<li>âœ… ä¸ GitHub æ·±åº¦é›†æˆ</li>
<li>âœ… ä¸°å¯Œçš„ Actions å¸‚åœº</li>
</ul>
<p>ç°åœ¨ä½ çš„åšå®¢æ¯æ¬¡æäº¤éƒ½ä¼šè‡ªåŠ¨éƒ¨ç½²äº†ï¼ğŸš€</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[RISC-V æ¶æ„åˆæ¢ï¼šæŒ‡ä»¤é›†ä¸å¯„å­˜å™¨]]></title>
            <link>https://kunyuanxu-star.github.io/blog/posts/risc-v-intro.html</link>
            <guid isPermaLink="false">https://kunyuanxu-star.github.io/blog/posts/risc-v-intro.html</guid>
            <pubDate>Sat, 30 Mar 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[<h1 id="risc-v-æ¶æ„åˆæ¢-æŒ‡ä»¤é›†ä¸å¯„å­˜å™¨" tabindex="-1">RISC-V æ¶æ„åˆæ¢ï¼šæŒ‡ä»¤é›†ä¸å¯„å­˜å™¨ <a class="header-anchor" href="#risc-v-æ¶æ„åˆæ¢-æŒ‡ä»¤é›†ä¸å¯„å­˜å™¨" aria-label="Permalink to &quot;RISC-V æ¶æ„åˆæ¢ï¼šæŒ‡ä»¤é›†ä¸å¯„å­˜å™¨&quot;">&ZeroWidthSpace;</a></h1>
<p>RISC-V æ­£åœ¨æ”¹å˜èŠ¯ç‰‡è®¾è®¡çš„æ ¼å±€ã€‚ä½œä¸ºä¸€ç§å¼€æºæŒ‡ä»¤é›†æ¶æ„ï¼Œå®ƒç®€æ´è€Œå¼ºå¤§ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-risc-v" tabindex="-1">ä»€ä¹ˆæ˜¯ RISC-Vï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-risc-v" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ RISC-Vï¼Ÿ&quot;">&ZeroWidthSpace;</a></h2>
<p>RISC-Vï¼ˆè¯»ä½œ&quot;risk-five&quot;ï¼‰æ˜¯ä¸€ä¸ªåŸºäºç²¾ç®€æŒ‡ä»¤é›†ï¼ˆRISCï¼‰åŸåˆ™çš„å¼€æºæŒ‡ä»¤é›†æ¶æ„ï¼ˆISAï¼‰ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©-risc-v" tabindex="-1">ä¸ºä»€ä¹ˆé€‰æ‹© RISC-Vï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆé€‰æ‹©-risc-v" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆé€‰æ‹© RISC-Vï¼Ÿ&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>ğŸ”“ <strong>å¼€æºå…è´¹</strong> - æ— éœ€æ”¯ä»˜æˆæƒè´¹ç”¨</li>
<li>ğŸ“š <strong>ç®€æ´è®¾è®¡</strong> - æ˜“äºå­¦ä¹ å’Œå®ç°</li>
<li>ğŸ”§ <strong>æ¨¡å—åŒ–</strong> - æ”¯æŒå¯é€‰æ‰©å±•</li>
<li>ğŸš€ <strong>ç°ä»£åŒ–</strong> - ä»é›¶å¼€å§‹è®¾è®¡ï¼Œé¿å…äº†å†å²åŒ…è¢±</li>
</ul>
<h2 id="å¯„å­˜å™¨çº¦å®š" tabindex="-1">å¯„å­˜å™¨çº¦å®š <a class="header-anchor" href="#å¯„å­˜å™¨çº¦å®š" aria-label="Permalink to &quot;å¯„å­˜å™¨çº¦å®š&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="é€šç”¨å¯„å­˜å™¨" tabindex="-1">é€šç”¨å¯„å­˜å™¨ <a class="header-anchor" href="#é€šç”¨å¯„å­˜å™¨" aria-label="Permalink to &quot;é€šç”¨å¯„å­˜å™¨&quot;">&ZeroWidthSpace;</a></h3>
<p>RISC-V æœ‰ 32 ä¸ªé€šç”¨å¯„å­˜å™¨ï¼ˆRV32/RV64ï¼‰ï¼š</p>
<p>| å¯„å­˜å™¨ | ABI åç§° | æè¿° | Caller/Callee |
|</p>
]]></description>
            <content:encoded><![CDATA[<h1 id="risc-v-æ¶æ„åˆæ¢-æŒ‡ä»¤é›†ä¸å¯„å­˜å™¨" tabindex="-1">RISC-V æ¶æ„åˆæ¢ï¼šæŒ‡ä»¤é›†ä¸å¯„å­˜å™¨ <a class="header-anchor" href="#risc-v-æ¶æ„åˆæ¢-æŒ‡ä»¤é›†ä¸å¯„å­˜å™¨" aria-label="Permalink to &quot;RISC-V æ¶æ„åˆæ¢ï¼šæŒ‡ä»¤é›†ä¸å¯„å­˜å™¨&quot;">&ZeroWidthSpace;</a></h1>
<p>RISC-V æ­£åœ¨æ”¹å˜èŠ¯ç‰‡è®¾è®¡çš„æ ¼å±€ã€‚ä½œä¸ºä¸€ç§å¼€æºæŒ‡ä»¤é›†æ¶æ„ï¼Œå®ƒç®€æ´è€Œå¼ºå¤§ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-risc-v" tabindex="-1">ä»€ä¹ˆæ˜¯ RISC-Vï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-risc-v" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ RISC-Vï¼Ÿ&quot;">&ZeroWidthSpace;</a></h2>
<p>RISC-Vï¼ˆè¯»ä½œ&quot;risk-five&quot;ï¼‰æ˜¯ä¸€ä¸ªåŸºäºç²¾ç®€æŒ‡ä»¤é›†ï¼ˆRISCï¼‰åŸåˆ™çš„å¼€æºæŒ‡ä»¤é›†æ¶æ„ï¼ˆISAï¼‰ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©-risc-v" tabindex="-1">ä¸ºä»€ä¹ˆé€‰æ‹© RISC-Vï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆé€‰æ‹©-risc-v" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆé€‰æ‹© RISC-Vï¼Ÿ&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>ğŸ”“ <strong>å¼€æºå…è´¹</strong> - æ— éœ€æ”¯ä»˜æˆæƒè´¹ç”¨</li>
<li>ğŸ“š <strong>ç®€æ´è®¾è®¡</strong> - æ˜“äºå­¦ä¹ å’Œå®ç°</li>
<li>ğŸ”§ <strong>æ¨¡å—åŒ–</strong> - æ”¯æŒå¯é€‰æ‰©å±•</li>
<li>ğŸš€ <strong>ç°ä»£åŒ–</strong> - ä»é›¶å¼€å§‹è®¾è®¡ï¼Œé¿å…äº†å†å²åŒ…è¢±</li>
</ul>
<h2 id="å¯„å­˜å™¨çº¦å®š" tabindex="-1">å¯„å­˜å™¨çº¦å®š <a class="header-anchor" href="#å¯„å­˜å™¨çº¦å®š" aria-label="Permalink to &quot;å¯„å­˜å™¨çº¦å®š&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="é€šç”¨å¯„å­˜å™¨" tabindex="-1">é€šç”¨å¯„å­˜å™¨ <a class="header-anchor" href="#é€šç”¨å¯„å­˜å™¨" aria-label="Permalink to &quot;é€šç”¨å¯„å­˜å™¨&quot;">&ZeroWidthSpace;</a></h3>
<p>RISC-V æœ‰ 32 ä¸ªé€šç”¨å¯„å­˜å™¨ï¼ˆRV32/RV64ï¼‰ï¼š</p>
<table tabindex="0">
<thead>
<tr>
<th>å¯„å­˜å™¨</th>
<th>ABI åç§°</th>
<th>æè¿°</th>
<th>Caller/Callee</th>
</tr>
</thead>
<tbody>
<tr>
<td>x0</td>
<td>zero</td>
<td>ç¡¬è¿çº¿é›¶</td>
<td>-</td>
</tr>
<tr>
<td>x1</td>
<td>ra</td>
<td>è¿”å›åœ°å€</td>
<td>Caller</td>
</tr>
<tr>
<td>x2</td>
<td>sp</td>
<td>æ ˆæŒ‡é’ˆ</td>
<td>Callee</td>
</tr>
<tr>
<td>x3</td>
<td>gp</td>
<td>å…¨å±€æŒ‡é’ˆ</td>
<td>-</td>
</tr>
<tr>
<td>x4</td>
<td>tp</td>
<td>çº¿ç¨‹æŒ‡é’ˆ</td>
<td>-</td>
</tr>
<tr>
<td>x5-x7</td>
<td>t0-t2</td>
<td>ä¸´æ—¶å¯„å­˜å™¨</td>
<td>Caller</td>
</tr>
<tr>
<td>x8</td>
<td>s0/fp</td>
<td>ä¿å­˜å¯„å­˜å™¨/å¸§æŒ‡é’ˆ</td>
<td>Callee</td>
</tr>
<tr>
<td>x9</td>
<td>s1</td>
<td>ä¿å­˜å¯„å­˜å™¨</td>
<td>Callee</td>
</tr>
<tr>
<td>x10-x11</td>
<td>a0-a1</td>
<td>å‡½æ•°å‚æ•°/è¿”å›å€¼</td>
<td>Caller</td>
</tr>
<tr>
<td>x12-x17</td>
<td>a2-a7</td>
<td>å‡½æ•°å‚æ•°</td>
<td>Caller</td>
</tr>
<tr>
<td>x18-x27</td>
<td>s2-s11</td>
<td>ä¿å­˜å¯„å­˜å™¨</td>
<td>Callee</td>
</tr>
<tr>
<td>x28-x31</td>
<td>t3-t6</td>
<td>ä¸´æ—¶å¯„å­˜å™¨</td>
<td>Caller</td>
</tr>
</tbody>
</table>
<h3 id="å…³é”®å¯„å­˜å™¨è¯´æ˜" tabindex="-1">å…³é”®å¯„å­˜å™¨è¯´æ˜ <a class="header-anchor" href="#å…³é”®å¯„å­˜å™¨è¯´æ˜" aria-label="Permalink to &quot;å…³é”®å¯„å­˜å™¨è¯´æ˜&quot;">&ZeroWidthSpace;</a></h3>
<p><strong>é›¶å¯„å­˜å™¨ï¼ˆx0/zeroï¼‰</strong></p>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">addi x5, x0, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">     # x5 = 0 + 10 = 10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> x6, x0, x0     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # x6 = 0ï¼ˆæ¸…é›¶æ“ä½œï¼‰</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>è¿”å›åœ°å€ï¼ˆx1/raï¼‰</strong></p>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">jal ra, function   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # è°ƒç”¨å‡½æ•°ï¼Œè¿”å›åœ°å€ä¿å­˜åˆ° ra</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">jalr x0, ra, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # è¿”å›ï¼ˆç­‰ä»·äº retï¼‰</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>æ ˆæŒ‡é’ˆï¼ˆx2/spï¼‰</strong></p>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">addi </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">16</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # åˆ†é…æ ˆç©ºé—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sw ra, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # ä¿å­˜è¿”å›åœ°å€</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="åŸºæœ¬æŒ‡ä»¤" tabindex="-1">åŸºæœ¬æŒ‡ä»¤ <a class="header-anchor" href="#åŸºæœ¬æŒ‡ä»¤" aria-label="Permalink to &quot;åŸºæœ¬æŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ç®—æœ¯æŒ‡ä»¤" tabindex="-1">ç®—æœ¯æŒ‡ä»¤ <a class="header-anchor" href="#ç®—æœ¯æŒ‡ä»¤" aria-label="Permalink to &quot;ç®—æœ¯æŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ç«‹å³æ•°åŠ æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">addi x5, x6, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">100</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # x5 = x6 + 100</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å¯„å­˜å™¨åŠ æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> x5, x6, x7     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # x5 = x6 + x7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å‡æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">sub</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> x5, x6, x7     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # x5 = x6 - x7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ä¹˜æ³•ï¼ˆéœ€è¦ M æ‰©å±•ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">mul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> x5, x6, x7     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # x5 = x6 * x7</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="é€»è¾‘æŒ‡ä»¤" tabindex="-1">é€»è¾‘æŒ‡ä»¤ <a class="header-anchor" href="#é€»è¾‘æŒ‡ä»¤" aria-label="Permalink to &quot;é€»è¾‘æŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ä¸æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> x5, x6, x7     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # x5 = x6 &#x26; x7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">andi x5, x6, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0xFF</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   # x5 = x6 &#x26; 0xFF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æˆ–æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">or</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> x5, x6, x7      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # x5 = x6 | x7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å¼‚æˆ–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">xor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> x5, x6, x7     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # x5 = x6 ^ x7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ç§»ä½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">slli x5, x6, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # x5 = x6 &#x3C;&#x3C; 3ï¼ˆé€»è¾‘å·¦ç§»ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">srli x5, x6, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # x5 = x6 >> 2ï¼ˆé€»è¾‘å³ç§»ï¼‰</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="å†…å­˜è®¿é—®" tabindex="-1">å†…å­˜è®¿é—® <a class="header-anchor" href="#å†…å­˜è®¿é—®" aria-label="Permalink to &quot;å†…å­˜è®¿é—®&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># åŠ è½½å­—ï¼ˆload wordï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">lw x5, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(x6)       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # x5 = Memory[x6 + 0]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å­˜å‚¨å­—ï¼ˆstore wordï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sw x5, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(x6)       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # Memory[x6 + 4] = x5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># åŠ è½½å­—èŠ‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">lb x5, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(x6)       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # åŠ è½½å­—èŠ‚ï¼ˆç¬¦å·æ‰©å±•ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">lbu x5, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(x6)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # åŠ è½½å­—èŠ‚ï¼ˆé›¶æ‰©å±•ï¼‰</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="æ§åˆ¶æµ" tabindex="-1">æ§åˆ¶æµ <a class="header-anchor" href="#æ§åˆ¶æµ" aria-label="Permalink to &quot;æ§åˆ¶æµ&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ— æ¡ä»¶è·³è½¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">j label            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # è·³è½¬åˆ° label</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">jal ra, function   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # è·³è½¬å¹¶é“¾æ¥ï¼ˆå‡½æ•°è°ƒç”¨ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ¡ä»¶åˆ†æ”¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">beq x5, x6, label  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # å¦‚æœ x5 == x6 åˆ™è·³è½¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">bne x5, x6, label  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # å¦‚æœ x5 != x6 åˆ™è·³è½¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">blt x5, x6, label  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # å¦‚æœ x5 &#x3C; x6 åˆ™è·³è½¬ï¼ˆæœ‰ç¬¦å·ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">bge x5, x6, label  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # å¦‚æœ x5 >= x6 åˆ™è·³è½¬ï¼ˆæœ‰ç¬¦å·ï¼‰</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="å®æˆ˜ç¤ºä¾‹" tabindex="-1">å®æˆ˜ç¤ºä¾‹ <a class="header-anchor" href="#å®æˆ˜ç¤ºä¾‹" aria-label="Permalink to &quot;å®æˆ˜ç¤ºä¾‹&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æ±‚å’Œå‡½æ•°" tabindex="-1">æ±‚å’Œå‡½æ•° <a class="header-anchor" href="#æ±‚å’Œå‡½æ•°" aria-label="Permalink to &quot;æ±‚å’Œå‡½æ•°&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># int sum(int a, int b) { return a + b; }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sum:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a0, a0, a1 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # a0 = a0 + a1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ret</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">             # è¿”å›</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">li a0, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            # a0 = 5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">li a1, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            # a1 = 3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">jal ra, sum        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # è°ƒç”¨ sumï¼Œç»“æœåœ¨ a0 ä¸­</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="æ•°ç»„æ±‚å’Œ" tabindex="-1">æ•°ç»„æ±‚å’Œ <a class="header-anchor" href="#æ•°ç»„æ±‚å’Œ" aria-label="Permalink to &quot;æ•°ç»„æ±‚å’Œ&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># int array_sum(int *arr, int len)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">array_sum:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    li t0, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            # sum = 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    li t1, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            # i = 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">loop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    bge t1, a1, done   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # if i >= len, goto done</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    lw t2, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a0)       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # t2 = arr[i]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> t0, t0, t2     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # sum += t2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    addi a0, a0, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # arr++</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    addi t1, t1, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # i++</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    j </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">loop</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">done:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mv a0, t0          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> # return sum</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ret</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="æ–æ³¢é‚£å¥‘æ•°åˆ—" tabindex="-1">æ–æ³¢é‚£å¥‘æ•°åˆ— <a class="header-anchor" href="#æ–æ³¢é‚£å¥‘æ•°åˆ—" aria-label="Permalink to &quot;æ–æ³¢é‚£å¥‘æ•°åˆ—&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-asm vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># int fib(int n)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fib:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # ä¿å­˜å¯„å­˜å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    addi </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">16</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    sw ra, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    sw s0, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # base case: n &#x3C; 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    li t0, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    blt a0, t0, base_case</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # é€’å½’: fib(n-1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    addi s0, a0, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # ä¿å­˜ n</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    addi a0, a0, -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    jal ra, fib</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    addi s1, a0, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      # ä¿å­˜ fib(n-1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # é€’å½’: fib(n-2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    addi a0, s0, -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    jal ra, fib</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # è¿”å› fib(n-1) + fib(n-2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a0, a0, s1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    j restore</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">base_case:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # return n</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">restore:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    lw ra, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    lw s0, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    addi </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">16</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ret</span></span></code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="risc-v-æ‰©å±•" tabindex="-1">RISC-V æ‰©å±• <a class="header-anchor" href="#risc-v-æ‰©å±•" aria-label="Permalink to &quot;RISC-V æ‰©å±•&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æ ‡å‡†æ‰©å±•" tabindex="-1">æ ‡å‡†æ‰©å±• <a class="header-anchor" href="#æ ‡å‡†æ‰©å±•" aria-label="Permalink to &quot;æ ‡å‡†æ‰©å±•&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li><strong>I</strong> - åŸºç¡€æ•´æ•°æŒ‡ä»¤é›†ï¼ˆå¿…éœ€ï¼‰</li>
<li><strong>M</strong> - æ•´æ•°ä¹˜é™¤æ³•</li>
<li><strong>A</strong> - åŸå­æ“ä½œ</li>
<li><strong>F</strong> - å•ç²¾åº¦æµ®ç‚¹</li>
<li><strong>D</strong> - åŒç²¾åº¦æµ®ç‚¹</li>
<li><strong>C</strong> - å‹ç¼©æŒ‡ä»¤ï¼ˆ16ä½ï¼‰</li>
</ul>
<h3 id="ç»„åˆå‘½å" tabindex="-1">ç»„åˆå‘½å <a class="header-anchor" href="#ç»„åˆå‘½å" aria-label="Permalink to &quot;ç»„åˆå‘½å&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li><strong>RV32I</strong> - 32ä½åŸºç¡€æ•´æ•°</li>
<li><strong>RV64G</strong> - 64ä½é€šç”¨ï¼ˆI + M + A + F + Dï¼‰</li>
<li><strong>RV32IMC</strong> - 32ä½æ•´æ•° + ä¹˜é™¤ + å‹ç¼©</li>
</ul>
<h2 id="å­¦ä¹ èµ„æº" tabindex="-1">å­¦ä¹ èµ„æº <a class="header-anchor" href="#å­¦ä¹ èµ„æº" aria-label="Permalink to &quot;å­¦ä¹ èµ„æº&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>ğŸ“– <a href="https://riscv.org/technical/specifications/" target="_blank" rel="noreferrer">RISC-V è§„èŒƒ</a></li>
<li>ğŸ”§ <a href="https://github.com/riscv/riscv-isa-sim" target="_blank" rel="noreferrer">RISC-V æ¨¡æ‹Ÿå™¨</a></li>
<li>ğŸ“ <a href="https://riscv.org/education/" target="_blank" rel="noreferrer">RISC-V åœ¨çº¿è¯¾ç¨‹</a></li>
<li>ğŸ’» <a href="https://github.com/riscv-collab/riscv-gnu-toolchain" target="_blank" rel="noreferrer">RISC-V å·¥å…·é“¾</a></li>
</ul>
<h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>RISC-V çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>âœ… å¼€æºè‡ªç”±ï¼Œæ— ä¸“åˆ©æŸç¼š</li>
<li>âœ… è®¾è®¡ç®€æ´ï¼Œæ˜“äºå­¦ä¹ </li>
<li>âœ… æ¨¡å—åŒ–æ‰©å±•ï¼Œçµæ´»å¼ºå¤§</li>
<li>âœ… ç¤¾åŒºæ´»è·ƒï¼Œç”Ÿæ€ç¹è£</li>
</ul>
<p>RISC-V æ˜¯æœªæ¥å¤„ç†å™¨æ¶æ„çš„é‡è¦æ–¹å‘ï¼ğŸš€</p>
]]></content:encoded>
        </item>
    </channel>
</rss>